# ALIGNMENT｜云主机代码更新

## 原始需求
- 将代码更新到云主机：仅更新代码，不上传 `data` 目录。
- 更新前需备份云主机上的 `data` 目录。

## 项目上下文
- 前后端分离：`frontend`（Vite+React+Antd）与 `backend`（Flask）。
- 本地数据位于 `data/` 目录（已在 `.gitignore` 排除）。
- 需要保留云主机上已有数据，避免覆盖。

## 任务范围
- 实现安全的代码同步方案，严格排除 `data/`。
- 执行前在云主机进行数据备份（压缩归档）。
- 编写部署脚本与使用说明。

## 技术约束
- 使用 `rsync`+`ssh` 实现文件同步；使用 `tar` 备份远程数据。
- 配置通过 `.env.deploy` 提供，避免在代码中写死主机信息。

## 已识别不确定性与问题
1. 云主机连接信息未知（`SSH_HOST`、`SSH_USER`、`REMOTE_DIR`）。
2. 云主机上数据目录具体路径需确认（`REMOTE_DATA_DIR`）。

## 决策策略
- 先实现通用化脚本与文档，使用环境变量驱动。
- 待提供主机信息后即可执行，无需修改代码。

## 待澄清问题（优先级从高到低）
1. 云主机 SSH 信息（域名/IP、端口、用户）。
2. 目标部署目录与数据目录的绝对路径。
3. 是否需要在部署后自动重启后端服务（如有，请提供命令）。